<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§‘ç›®ä¸‰ç¯å…‰è€ƒè¯•ç»ƒä¹ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 500px;
            width: 100%;
            text-align: center;
        }

        .title {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .progress {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        .timer {
            font-size: 48px;
            font-weight: bold;
            color: #e74c3c;
            margin: 20px 0;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .play-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .option-btn {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            padding: 12px 8px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #2c3e50;
        }

        .option-btn:hover {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .option-btn:disabled {
            background: #ecf0f1;
            color: #bdc3c7;
            cursor: not-allowed;
            border-color: #bdc3c7;
        }

        .result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
        }

        .result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .restart-btn {
            background: linear-gradient(45deg, #27ae60, #229954);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .title {
                font-size: 20px;
            }
            
            .timer {
                font-size: 36px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .option-btn {
                font-size: 16px;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ç§‘ç›®ä¸‰ç¯å…‰è€ƒè¯•ç»ƒä¹ </h1>
        
        <div class="progress" id="progress">å‡†å¤‡å¼€å§‹è€ƒè¯•</div>
        
        <div class="timer" id="timer"></div>
        
        <button class="play-btn" id="playBtn" onclick="startExam()">å¼€å§‹è€ƒè¯•</button>
        
        <div class="options" id="options">
            <button class="option-btn" onclick="selectAnswer('è¿‘å…‰ç¯')">è¿‘å…‰ç¯</button>
            <button class="option-btn" onclick="selectAnswer('å°ç¯')">å°ç¯</button>
            <button class="option-btn" onclick="selectAnswer('è¿œå…‰ç¯')">è¿œå…‰ç¯</button>
            <button class="option-btn" onclick="selectAnswer('è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹')">è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹</button>
            <button class="option-btn" onclick="selectAnswer('å…³é—­æ‰€æœ‰ç¯å…‰')">å…³é—­æ‰€æœ‰ç¯å…‰</button>
        </div>
        
        <div class="result hidden" id="result"></div>
        
        <button class="restart-btn hidden" id="restartBtn" onclick="restartExam()">é‡æ–°å¼€å§‹</button>
    </div>

    <script>
        // è€ƒè¯•çŠ¶æ€
        let currentExam = {
            isActive: false,
            currentStep: 0,
            selectedQuestions: [],
            totalQuestions: 7, // 1å¼€å§‹ + 5éšæœº + 1ç»“æŸ
            correctAnswers: 0,
            timer: null,
            timeLeft: 5,
            audio: null
        };

        // éŸ³é¢‘æ–‡ä»¶ç­”æ¡ˆæ˜ å°„
        const audioAnswers = [
            'è¿‘å…‰ç¯',    // 1.è¯·å¼€å¯å‰ç…§ç¯.mov
            'è¿‘å…‰ç¯',    // 2.ä¼šè½¦.mov
            'è¿‘å…‰ç¯',    // 3.é€šè¿‡æœ‰äº¤é€šä¿¡å·ç¯æ§åˆ¶çš„è·¯å£.mov
            'è¿‘å…‰ç¯',    // 4.å¤œé—´åŒæ–¹å‘è¿‘è·ç¦»è·Ÿè½¦è¡Œé©¶.mov
            'è¿‘å…‰ç¯',    // 5.åœ¨æœ‰è·¯ç¯ç…§æ˜è‰¯å¥½çš„é“è·¯è¡Œé©¶.mov
            'è¿œå…‰ç¯',    // 6.è¿›å…¥æ— ç…§æ˜æˆ–ç…§æ˜ä¸è‰¯çš„é“è·¯è¡Œé©¶.mov
            'å°ç¯',      // 7.åœ¨è·¯è¾¹ä¸´æ—¶åœè½¦.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 8.è¶…è½¦.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 9.é€šè¿‡æ€¥å¼¯.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 10.é€šè¿‡å¡è·¯.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 11.é€šè¿‡æ‹±æ¡¥.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 12.é€šè¿‡æ²¡æœ‰äº¤é€šä¿¡å·ç¯æ§åˆ¶çš„è·¯å£.mov
            'è¿œè¿‘å…‰ç¯é—ªä¸¤ä¸‹', // 13.é€šè¿‡äººè¡Œæ¨ªé“.mov
            'å…³é—­æ‰€æœ‰ç¯å…‰'  // 14.è¯·å…³é—­æ‰€æœ‰ç¯å…‰.mov
        ];

        // DOMå…ƒç´ 
        const progressEl = document.getElementById('progress');
        const timerEl = document.getElementById('timer');
        const playBtn = document.getElementById('playBtn');
        const optionsEl = document.getElementById('options');
        const resultEl = document.getElementById('result');
        const restartBtn = document.getElementById('restartBtn');

        // å¼€å§‹è€ƒè¯•
        function startExam() {
            currentExam.isActive = true;
            currentExam.currentStep = 0;
            currentExam.correctAnswers = 0;
            
            // ç”Ÿæˆéšæœºé¢˜ç›®ï¼šä»2-13ä¸­éšæœºé€‰æ‹©5ä¸ª
            const availableQuestions = Array.from({length: 12}, (_, i) => i + 1); // 2-13
            currentExam.selectedQuestions = [0]; // å¼€å§‹é¢˜ç›®ï¼ˆç¬¬1é¢˜ï¼‰
            
            // éšæœºé€‰æ‹©5ä¸ªé¢˜ç›®
            for (let i = 0; i < 5; i++) {
                const randomIndex = Math.floor(Math.random() * availableQuestions.length);
                currentExam.selectedQuestions.push(availableQuestions[randomIndex]);
                availableQuestions.splice(randomIndex, 1);
            }
            
            currentExam.selectedQuestions.push(13); // ç»“æŸé¢˜ç›®ï¼ˆç¬¬14é¢˜ï¼‰
            currentExam.totalQuestions = currentExam.selectedQuestions.length;
            
            // éšè—å¼€å§‹æŒ‰é’®ï¼Œæ˜¾ç¤ºé€‰é¡¹
            playBtn.classList.add('hidden');
            optionsEl.classList.remove('hidden');
            
            // å¼€å§‹ç¬¬ä¸€é¢˜
            playAudio(0);
        }

        // æ’­æ”¾éŸ³é¢‘
        function playAudio(stepIndex) {
            const audioIndex = currentExam.selectedQuestions[stepIndex];
            currentExam.currentStep = stepIndex;
            
            // æ›´æ–°è¿›åº¦
            progressEl.textContent = `ç¬¬ ${stepIndex + 1}/${currentExam.totalQuestions} é¢˜`;
            
            // ç¦ç”¨é€‰é¡¹æŒ‰é’®
            disableOptions(true);
            
            // éŸ³é¢‘æ–‡ä»¶åæ˜ å°„
            const audioFileNames = [
                "1.è¯·å¼€å¯å‰ç…§ç¯.mov",
                "2.ä¼šè½¦.mov",
                "3.é€šè¿‡æœ‰äº¤é€šä¿¡å·ç¯æ§åˆ¶çš„è·¯å£.mov",
                "4.å¤œé—´åŒæ–¹å‘è¿‘è·ç¦»è·Ÿè½¦è¡Œé©¶.mov",
                "5.åœ¨æœ‰è·¯ç¯ç…§æ˜è‰¯å¥½çš„é“è·¯è¡Œé©¶.mov",
                "6.è¿›å…¥æ— ç…§æ˜æˆ–ç…§æ˜ä¸è‰¯çš„é“è·¯è¡Œé©¶.mov",
                "7.åœ¨è·¯è¾¹ä¸´æ—¶åœè½¦.mov",
                "8.è¶…è½¦.mov",
                "9.é€šè¿‡æ€¥å¼¯.mov",
                "10.é€šè¿‡å¡è·¯.mov",
                "11.é€šè¿‡æ‹±æ¡¥.mov",
                "12.é€šè¿‡æ²¡æœ‰äº¤é€šä¿¡å·ç¯æ§åˆ¶çš„è·¯å£.mov",
                "13.é€šè¿‡äººè¡Œæ¨ªé“.mov",
                "14.è¯·å…³é—­æ‰€æœ‰ç¯å…‰.mov"
            ];
            
            // åœæ­¢ä¹‹å‰çš„éŸ³é¢‘
            if (currentExam.audio) {
                currentExam.audio.pause();
                currentExam.audio = null;
            }
            
            // åˆ›å»ºéŸ³é¢‘å…ƒç´ å¹¶æ’­æ”¾
            currentExam.audio = new Audio(`audio/${audioFileNames[audioIndex]}`);
            currentExam.audio.preload = "auto";
            
            currentExam.audio.oncanplaythrough = function() {
                currentExam.audio.play();
            };
            
            currentExam.audio.onended = function() {
                // éŸ³é¢‘æ’­æ”¾ç»“æŸåå¼€å§‹è®¡æ—¶
                startTimer();
            };
            
            currentExam.audio.onerror = function() {
                // å¦‚æœéŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ–¹å¼
                console.log(`éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œæ¨¡æ‹Ÿæ’­æ”¾éŸ³é¢‘: ${audioIndex + 1}.mov`);
                setTimeout(() => {
                    startTimer();
                }, 3000);
            };
        }

        // å¼€å§‹è®¡æ—¶
        function startTimer() {
            currentExam.timeLeft = 5;
            timerEl.textContent = currentExam.timeLeft;
            
            // å¯ç”¨é€‰é¡¹æŒ‰é’®
            disableOptions(false);
            
            currentExam.timer = setInterval(() => {
                currentExam.timeLeft--;
                timerEl.textContent = currentExam.timeLeft;
                
                if (currentExam.timeLeft <= 0) {
                    clearInterval(currentExam.timer);
                    // è¶…æ—¶ï¼Œè§†ä¸ºç­”é”™
                    selectAnswer('');
                }
            }, 1000);
        }

        // ç¦ç”¨/å¯ç”¨é€‰é¡¹æŒ‰é’®
        function disableOptions(disable) {
            const buttons = optionsEl.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = disable);
        }

        // é€‰æ‹©ç­”æ¡ˆ
        function selectAnswer(answer) {
            if (!currentExam.isActive) return;
            
            clearInterval(currentExam.timer);
            
            const audioIndex = currentExam.selectedQuestions[currentExam.currentStep];
            const correctAnswer = audioAnswers[audioIndex];
            
            // æ£€æŸ¥ç­”æ¡ˆ
            if (answer === correctAnswer) {
                currentExam.correctAnswers++;
                showAnswerResult(true, correctAnswer);
            } else {
                showAnswerResult(false, correctAnswer);
                // ç­”é”™ç«‹å³ç»“æŸè€ƒè¯•
                setTimeout(() => {
                    endExam(false);
                }, 2000);
                return;
            }
            
            // ç»§ç»­ä¸‹ä¸€é¢˜
            setTimeout(() => {
                if (currentExam.currentStep < currentExam.totalQuestions - 1) {
                    playAudio(currentExam.currentStep + 1);
                } else {
                    // è€ƒè¯•å®Œæˆ
                    endExam(true);
                }
            }, 1500);
        }

        // æ˜¾ç¤ºç­”é¢˜ç»“æœ
        function showAnswerResult(isCorrect, correctAnswer) {
            resultEl.classList.remove('hidden', 'success', 'error');
            if (isCorrect) {
                resultEl.classList.add('success');
                resultEl.textContent = 'âœ“ å›ç­”æ­£ç¡®ï¼';
            } else {
                resultEl.classList.add('error');
                resultEl.textContent = `âœ— å›ç­”é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${correctAnswer}`;
            }
            
            setTimeout(() => {
                resultEl.classList.add('hidden');
            }, 1500);
        }

        // ç»“æŸè€ƒè¯•
        function endExam(isSuccess) {
            currentExam.isActive = false;
            
            if (currentExam.audio) {
                currentExam.audio.pause();
                currentExam.audio = null;
            }
            
            clearInterval(currentExam.timer);
            
            // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
            resultEl.classList.remove('hidden', 'success', 'error');
            if (isSuccess) {
                resultEl.classList.add('success');
                resultEl.textContent = `ğŸ‰ è€ƒè¯•é€šè¿‡ï¼ç­”å¯¹äº† ${currentExam.correctAnswers}/${currentExam.totalQuestions} é¢˜`;
            } else {
                resultEl.classList.add('error');
                resultEl.textContent = `âŒ è€ƒè¯•å¤±è´¥ï¼ç­”å¯¹äº† ${currentExam.correctAnswers}/${currentExam.totalQuestions} é¢˜`;
            }
            
            // éšè—é€‰é¡¹ï¼Œæ˜¾ç¤ºé‡æ–°å¼€å§‹æŒ‰é’®
            optionsEl.classList.add('hidden');
            restartBtn.classList.remove('hidden');
            timerEl.textContent = '';
            progressEl.textContent = 'è€ƒè¯•ç»“æŸ';
        }

        // é‡æ–°å¼€å§‹è€ƒè¯•
        function restartExam() {
            // é‡ç½®çŠ¶æ€
            currentExam = {
                isActive: false,
                currentStep: 0,
                selectedQuestions: [],
                totalQuestions: 7,
                correctAnswers: 0,
                timer: null,
                timeLeft: 5,
                audio: null
            };
            
            // é‡ç½®UI
            resultEl.classList.add('hidden');
            restartBtn.classList.add('hidden');
            playBtn.classList.remove('hidden');
            progressEl.textContent = 'å‡†å¤‡å¼€å§‹è€ƒè¯•';
            timerEl.textContent = '';
            
            // åœæ­¢éŸ³é¢‘
            if (currentExam.audio) {
                currentExam.audio.pause();
                currentExam.audio = null;
            }
            
            clearInterval(currentExam.timer);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('ç§‘ç›®ä¸‰ç¯å…‰è€ƒè¯•ç»ƒä¹ é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>